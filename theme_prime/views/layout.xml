<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!--
    ============================================================================
    Discount Percentage
    ============================================================================
    -->
    <template id="discount_percentage" name="Discount Percentage">
        <t t-if="combination_info['has_discounted_price']">
            <t t-set="discount_percentage" t-value="round((combination_info['list_price'] - combination_info['price']) / combination_info['list_price'] * 100)"/>
            <small class="tp-discount-percentage d-none d-md-inline-block ml-1">
                (<t t-out="discount_percentage"/>% OFF)
            </small>
        </t>
    </template>

    <!--
    ============================================================================
    Label
    ============================================================================
    -->
    <template id="product_label" name="Product Label">
        <t t-if="label">
            <t t-set="style" t-value="style or label.style"/>
            <span t-if="style == '1'" t-attf-class="tp-product-label-style-1 #{_classes}" t-attf-style="background-color: rgba(#{label.background_color_rgb}, .8); color: #{label.text_color};">
                <span t-field="label.name"/>
                <div class="after" t-attf-style="border-color: rgba(#{label.background_color_rgb},.5) transparent rgba(#{label.background_color_rgb},.5) rgba(#{label.background_color_rgb},.8);"/>
            </span>
            <span t-elif="style in ['2', '3', '4', '5']" t-attf-class="tp-product-label-style-#{style} #{_classes}" t-attf-style="background-color: rgba(#{label.background_color_rgb}, .8); color: #{label.text_color};">
                <span t-field="label.name"/>
            </span>
        </t>
    </template>

    <template id="tp_product_color_pills" name="Color pills">
        <t t-set="is_color_preview_enable" t-value="website._get_dr_theme_config('json_grid_product')['show_color_preview']"/>
        <div t-attf-class="tp-color-preview-container d-flex align-items-center justify-content-between #{_classes}" t-if="is_color_preview_enable or show_similar">
            <t t-if="is_color_preview_enable">
                <t t-set="product_colors_info" t-value="product._get_product_colors(limit)"/>
                <t t-set="product_colors" t-value="product_colors_info.get('colors')"/>
                <t t-set="more_colors" t-value="product_colors_info.get('more_colors')"/>
                <div class="d-flex align-items-center" t-if="product_colors">
                    <t t-foreach="product_colors" t-as="color">
                        <t t-set="attr_val" t-value="color.get('value')"/>
                        <t t-set="attr_id" t-value="color.get('id')"/>
                        <span t-att-data-pill-id="attr_id" t-if="color.get('type') == 'color'" t-attf-class="tp-color-attr-pill mr-1 tp-cursor-pointer rounded-circle align-items-center justify-content-center #{'d-none d-lg-flex' if color_index &gt; 2 else ' '}">
                            <span class="d-inline-block h-100 w-100 rounded-circle" t-attf-style="background-color: #{attr_val}"/>
                        </span>
                        <span t-att-data-pill-id="attr_id" t-if="color.get('type') == 'image'" t-attf-class="tp-color-attr-pill mr-1 tp-cursor-pointer rounded-circle align-items-center justify-content-center #{'d-none d-lg-flex' if color_index &gt; 2 else ' '}">
                            <img height="30" width="30" class="img img-fluid rounded-circle" t-att-src="attr_val"/>
                        </span>
                    </t>
                    <a t-if="more_colors &gt; 0 and not no_label" class="btn btn-link btn-sm p-0 d-none d-lg-block font-weight-bold" t-att-href="product_href"> + <t t-out="more_colors"/> MORE</a>
                </div>
            </t>
            <t t-if="show_similar">
                <div t-if="product_colors" class="float-right">
                    <button t-if="website._get_dr_theme_config('json_grid_product')['show_similar_products'] and product.alternative_product_ids" type="button" role="button" class="btn btn bg-white text-muted btn-secondary rounded-circle tp_show_similar_products tp-product-view-similar-btn" title="View Similar" t-att-data-product-template-id="product.id">
                        <i class="fa fa-clone" role="img" aria-label="View Similar"></i>
                    </button>
                </div>
                <div t-else=" " class="w-100">
                    <button t-if="website._get_dr_theme_config('json_grid_product')['show_similar_products'] and product.alternative_product_ids" type="button" role="button" class="btn btn-link btn-sm text-primary d-block my-n1 mx-auto tp_show_similar_products tp-product-view-similar-btn tp-product-view-similar-btn-extra" title="View Similar" t-att-data-product-template-id="product.id">
                        <i class="fa fa-clone" role="img" aria-label="View Similar"></i> View Similar
                    </button>
                </div>
            </t>
        </div>
    </template>

    <template id="product_stock_label" name="Product Stock Label">
        <!-- NOTE: It does not support 1st style (need after/before) -->
        <span t-if="product.dr_show_out_of_stock == 'OUT_OF_STOCK'" t-attf-class="tp-product-stock-label tp-product-label-style-#{style or 5}" style="background-color: rgba(212, 18, 18, .8); color: #FFFFFF;">
            OUT OF STOCK
        </span>
        <span t-else="" t-attf-class="tp-product-stock-label tp-product-label-style-#{style or 5}" style="background-color: rgba(255, 193, 7, 0.85); color: #FFFFFF;">
            <t t-esc="product.dr_show_out_of_stock"/> UNITS LEFT
        </span>
    </template>

    <template id="tp_b2b_price_label" name="Product Stock Label">
        <small class="text-muted">
            <t t-set="has_sign_up" t-value="request.website._get_dr_theme_config()['has_sign_up']"/>
            <a t-attf-href="/web/login">Login</a> <t t-if="has_sign_up"> | <a t-attf-href="/web/signup">Register</a></t> to see price
        </small>
    </template>

    <!--
    ============================================================================
    Bottombar
    ============================================================================
    -->
    <template id="template_bottom_bar" inherit_id="website.layout" name="Bottombar">
        <xpath expr="//div[@id='wrapwrap']/header" position="before">
            <t t-set="show_bottom_bar" t-value="request.website._get_dr_theme_config('json_bottom_bar')['show_bottom_bar']"/>
            <t t-if="show_bottom_bar">
                <t t-call="theme_prime.tp_mobile_bottombar_component"/>
            </t>
        </xpath>
    </template>

    <!--
    ============================================================================
    404 Page
    ============================================================================
    -->
    <template id="404" inherit_id="http_routing.404">
        <xpath expr="//div[@id='wrap']" position="replace">
            <div id="wrap">
                <t t-out="0"/>
                <div class="oe_structure oe_empty">
                    <div class="container">
                        <div class="row justify-content-center my-4">
                            <div class="col-12 col-lg-6">
                                <t t-call="theme_prime.tp_svg_404">
                                    <t t-set="_classes" t-value="'mt-4'"/>
                                </t>
                            </div>
                            <div class="col-12 text-center mt32">
                                <h2>We can't seem to find the page you are looking for</h2>
                                <p class="mt-3 lead">
                                    Here are some helpful links instead
                                </p>
                            </div>
                        </div>
                        <div class="row mb-4 justify-content-center">
                            <div class="col-12 col-lg-10 col-xl-8">
                                <div class="row">
                                    <div class="col-12 col-lg-4 mb-3">
                                        <a class="card" href="/">
                                            <div class="card-body py-3">
                                                <div class="media align-items-center">
                                                    <span class="dri dri-home-l fa-2x text-primary ml-1 mr-3"></span>
                                                    <div class="media-body">
                                                        <h6 class="mb-1">Homepage</h6>
                                                        <div>Return to homepage</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-12 col-lg-4 mb-3">
                                        <a class="card tp-search-sidebar-action" href="#">
                                            <div class="card-body py-3">
                                                <div class="media align-items-center">
                                                    <span class="dri dri-search-l fa-2x text-success ml-1 mr-3"></span>
                                                    <div class="media-body">
                                                        <h6 class="mb-1">Search</h6>
                                                        <div>Find your product</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-12 col-lg-4 mb-3">
                                        <a class="card" href="/contactus">
                                            <div class="card-body py-3">
                                                <div class="media align-items-center">
                                                    <span class="dri dri-phone-l fa-2x text-info ml-1 mr-3"></span>
                                                    <div class="media-body">
                                                        <h6 class="mb-1">Contact us</h6>
                                                        <div>Get in touch with us</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </xpath>
    </template>

    <!--
    ============================================================================
    Optional Product Dialog
    ============================================================================
    -->
    <template id="configure_optional_products" inherit_id="sale_product_configurator.configure_optional_products">
        <xpath expr="//table" position="attributes">
            <attribute name="class" add="border" remove="table-striped table-sm" separator=" "/>
        </xpath>
        <xpath expr="//thead" position="attributes">
            <attribute name="class" add="thead-light" separator=" "/>
        </xpath>
        <xpath expr="//table//tr[hasclass('o_select_options')]/td" position="replace">
            <td colspan="4" class="bg-200"><h5 class="mb-0">Available Options</h5></td>
        </xpath>
    </template>

    <template id="optional_product_items" inherit_id="sale_product_configurator.optional_product_items">
        <xpath expr="//a[hasclass('js_add')]" position="replace">
            <a role="button" href="#" class="js_add btn btn-primary-soft mt-2" title="Add to cart">
                <i class="dri dri-cart add-optionnal-item"></i>
            </a>
        </xpath>
        <xpath expr="//a[hasclass('js_remove')]" position="replace">
            <a role="button" href="#" class="js_remove text-danger mt-2 d-inline-block" title="Remove from cart">
                <i class="fa fa-trash-o remove-optionnal-item"></i>
            </a>
        </xpath>
    </template>

    <!--
    ============================================================================
    Shop Page
    ============================================================================
    -->
    <template id="category_pills" name="Theme Prime: Category Pills">
        <t t-set="category_pills_config" t-value="website._get_dr_theme_config('json_category_pills')"/>
        <div class="tp-category-pill-container" t-if="category_pills_config['enable']">
            <t t-set="tp_categories_to_display" t-value="categories"/>
            <t t-if="category and category_pills_config['enable_child']">
                <t t-set="tp_categories_to_display" t-value="category.child_id"/>
            </t>
            <div t-if="tp_categories_to_display" t-attf-class="row py-2 #{'d-lg-none' if category_pills_config['hide_desktop'] else ''}">
                <div class="col-12">
                    <h5 t-if="category_pills_config.get('show_title', True)">Categories</h5>
                    <ul t-if="category_pills_config['style'] == '1'" class="list-inline tp-category-pills-style-1 mb-0">
                        <li class="list-inline-item mr-2 tp-category-pill" t-foreach="tp_categories_to_display" t-as="_category">
                            <a t-att-href="keep('/shop/category/%s' % slug(_category), category=0)" class="text-center d-block">
                                <img class="tp-category-img" t-attf-src="/web/image/product.public.category/#{_category.id}/image_128"/>
                                <h6 class="mt-1 mb-0 text-truncate tp-category-text tp-link-dark" t-out="_category.name"/>
                            </a>
                        </li>
                    </ul>
                    <ul t-elif="category_pills_config['style'] == '2'" class="list-inline tp-category-pills-style-2 mb-0">
                        <li class="list-inline-item mr-2" t-foreach="tp_categories_to_display" t-as="_category">
                            <a t-att-href="keep('/shop/category/%s' % slug(_category), category=0)" class="tp-category-pill d-block border rounded-pill">
                                <t t-out="_category.name"/>
                            </a>
                        </li>
                    </ul>
                    <ul t-elif="category_pills_config['style'] == '3'" class="list-inline tp-category-pills-style-3 mb-0">
                        <li class="list-inline-item mr-2" t-foreach="tp_categories_to_display" t-as="_category">
                            <a t-att-href="keep('/shop/category/%s' % slug(_category), category=0)" class="d-block border rounded-pill tp-category-pill">
                                <img class="tp-category-img border" t-attf-src="/web/image/product.public.category/#{_category.id}/image_128"/>
                                <span class="tp-category-text d-inline-block" t-out="_category.name"/>
                            </a>
                        </li>
                    </ul>
                    <ul t-elif="category_pills_config['style'] == '4'" class="list-inline tp-category-pills-style-4 mb-0">
                        <li class="list-inline-item mr-2" t-foreach="tp_categories_to_display" t-as="_category">
                            <a t-att-href="keep('/shop/category/%s' % slug(_category), category=0)" class="d-block border tp-category-pill">
                                <img class="tp-category-img border" t-attf-src="/web/image/product.public.category/#{_category.id}/image_128"/>
                                <span class="tp-category-text d-inline-block" t-out="_category.name"/>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </template>

    <template id="selected_attributes" name="Theme Prime: Selected Attributes">
        <t t-set="tp_selected_min_price" t-value="request.httprequest.args.get('min_price')"/>
        <t t-set="tp_selected_max_price" t-value="request.httprequest.args.get('max_price')"/>
        <div class="row no-gutters tp-selected-attributes" t-if="is_activated_filter and is_view_active('website_sale.products_attributes')">
            <div class="col-12">
                <ul class="list-inline mt-2 mb-0">
                    <li class="list-inline-item my-1 tp-clear-all">
                        <div class="tp-attribute clear tp-cursor-pointer">
                            <span>Clear Filters</span>
                            <i class="dri dri-cross-l ml-1 tp-attribute-remove"/>
                        </div>
                    </li>
                    <li class="list-inline-item my-1" t-foreach="request.env['product.attribute.value'].browse(attrib_set)" t-as="attribute_value_id">
                        <div class="tp-attribute tp-cursor-pointer d-flex align-items-center" t-attf-data-id="attribute_#{attribute_value_id.attribute_id.id}-#{attribute_value_id.id}">
                            <span
                                t-if="attribute_value_id.attribute_id.display_type == 'color'"
                                class="tp-attribute-color mx-1"
                                t-attf-style="background-color: #{attribute_value_id.html_color or attribute_value_id.name}"/>
                            <span t-field="attribute_value_id.name"/>
                            <i class="dri dri-cross-l ml-1 tp-attribute-remove"/>
                        </div>
                    </li>
                    <li class="list-inline-item my-1" t-foreach="request.env['dr.product.tags'].browse(selected_tags)" t-as="tag">
                        <span class="tp-attribute tp-cursor-pointer" t-attf-data-id="tag-#{tag.id}">
                            <span t-field="tag.name"/>
                            <i class="dri dri-cross-l ml-1 tp-attribute-remove"/>
                        </span>
                    </li>
                    <li class="list-inline-item my-1" t-foreach="selected_ratings" t-as="rating">
                        <span class="tp-attribute tp-cursor-pointer" t-attf-data-id="rating-#{rating}">
                            <span t-out="rating"/>
                            <div class="o_website_rating_static d-inline-block mx-1">
                                <i class="fa fa-star"/>
                            </div>
                            <span>&amp; above</span>
                            <i class="dri dri-cross-l ml-1 tp-attribute-remove"/>
                        </span>
                    </li>
                    <li class="list-inline-item my-1" t-if="selected_hide_out_of_stock">
                        <span class="tp-attribute tp-cursor-pointer" data-id="hide_out_of_stock">
                            <span>Hide out of stock</span>
                            <i class="dri dri-cross-l ml-1 tp-attribute-remove"/>
                        </span>
                    </li>
                    <li t-if="tp_selected_min_price or tp_selected_max_price" class="list-inline-item my-1">
                        <span class="tp-attribute tp-cursor-pointer" data-type="price">
                            <span class="mr-1" t-out="pricelist.currency_id.symbol"/>
                            <span t-out="'%s - %s' % (tp_selected_min_price or min_price, tp_selected_max_price or max_price)"/>
                            <i class="dri dri-cross-l ml-1 tp-attribute-remove"/>
                        </span>
                    </li>
                </ul>
            </div>
        </div>
    </template>

    <template id="pricelist_list" name="Theme Prime: Pricelists Dropdown" inherit_id="website_sale.pricelist_list">
        <xpath expr="//a" position="before">
            <span class="h6 mr-1">Pricelist:</span>
        </xpath>
    </template>

    <template id="products_breadcrumb" name="Theme Prime: Products Breadcrumb" inherit_id="website_sale.products_breadcrumb">
        <xpath expr="//span[@t-field='cat.name']" position="after">
             - <t t-out="search_count"/> items
        </xpath>
        <xpath expr="//ol" position="after">
            <div t-else="" class="d-inline-block">
                <h6 class="mb-0 d-inline-block">All Products</h6> - <t t-out="search_count"/> items
            </div>
        </xpath>
    </template>

    <template id="products" inherit_id="website_sale.products" name="Theme Prime: Products">
        <xpath expr="//t[@t-call='website_sale.products_breadcrumb']" position="attributes">
            <attribute name="t-if">False</attribute>
        </xpath>
        <xpath expr="//div[hasclass('products_header')]" position="attributes">
            <attribute name="t-if">False</attribute>
        </xpath>
        <xpath expr="//div[hasclass('o_wsale_products_main_row')]" position="before">
            <t t-call="theme_prime.category_pills"/>
            <div class="modal-backdrop tp-sidebar-backdrop"/>
            <div class="py-2 tp-shop-topbar">
                <t t-set="tp_is_filters_activated" t-value="is_view_active('website_sale.products_attributes') or is_view_active('website_sale.products_categories')"/>
                <div class="d-lg-none d-flex align-items-center justify-content-between">
                    <h5 class="mb-0">Shop</h5>
                    <div><t t-out="search_count"/> items found.</div>
                </div>
                <div class="d-none d-lg-flex row justify-content-between align-items-center">
                    <div class="col-auto">
                        <div class="d-flex flex-column flex-lg-row align-items-lg-center">
                            <a href="#" t-if="tp_is_filters_activated and website._get_dr_theme_config('json_shop_filters')['in_sidebar']" class="tp-filter-sidebar-toggle btn btn-primary-soft mb-0 h6 mr-2 p-0">
                                <span class="d-inline-block bg-primary px-2 py-1"><i class="fa fa-filter"/> </span> <b class="d-inline-block pl-1 pr-2">Show Filters </b>
                            </a>
                            <t t-call="website_sale.products_breadcrumb">
                                <t t-set="_classes" t-valuef="m-0 p-0 bg-transparent"/>
                            </t>
                        </div>
                    </div>
                    <div class="col-auto">
                        <div class="form-inline flex-md-nowrap justify-content-end">
                            <t t-call="website_sale.pricelist_list">
                                <t t-set="_classes" t-valuef="ml-3 mb-2"/>
                            </t>
                            <t t-if="is_view_active('website_sale.sort')">
                                <t t-set="list_price_asc_label">Price - Low to High</t>
                                <t t-set="list_price_desc_label">Price - High to Low</t>
                                <t t-set="newest_arrivals_desc_label">Newest arrivals</t>
                                <t t-set="name_asc_label">Name</t>
                                <t t-set="website_sale_sortable" t-value="[
                                    (list_price_asc_label, 'list_price asc'),
                                    (list_price_desc_label, 'list_price desc'),
                                    (newest_arrivals_desc_label, 'create_date desc'),
                                    (name_asc_label, 'name asc')
                                ]"/>
                                <t t-if="not website._dr_has_b2b_access()">
                                    <t t-set="website_sale_sortable" t-value="[(newest_arrivals_desc_label, 'create_date desc'),(name_asc_label, 'name asc')]"/>
                                </t>
                                <t t-set="website_sale_sortable_current" t-value="[sort for sort in website_sale_sortable if sort[1]==request.params.get('order', '')]"/>
                                <div class="o_sortby_dropdown dropdown dropdown_sorty_by ml-3 pb-2">
                                    <span class="d-none d-lg-inline h6 mr-1">Sort By:</span>
                                    <a role="button" href="#" class="dropdown-toggle btn btn-light border-0 px-0 text-muted align-baseline" data-toggle="dropdown">
                                        <span class="d-none d-lg-inline">
                                            <t t-if='website_sale_sortable_current'>
                                                <t t-out="website_sale_sortable_current[0][0]"/>
                                            </t>
                                            <t t-else='1'>
                                                Featured
                                            </t>
                                        </span>
                                        <i class="fa fa-sort-amount-asc d-lg-none"/>
                                    </a>
                                    <div class="dropdown-menu dropdown-menu-right" role="menu">
                                        <t t-foreach="website_sale_sortable" t-as="sortby">
                                            <a role="menuitem" rel="noindex,nofollow" t-att-href="keep('/shop', order=sortby[1])" class="dropdown-item">
                                                <span t-out="sortby[0]"/>
                                            </a>
                                        </t>
                                    </div>
                                </div>
                            </t>
                            <div t-if="is_view_active('website_sale.add_grid_or_list_option')" class="btn-group btn-group-toggle ml-3 mb-2 d-none d-sm-inline-flex o_wsale_apply_layout" data-toggle="buttons">
                                <label t-attf-class="btn btn-light bg-white border #{'active' if layout_mode != 'list' else None} fa fa-th-large o_wsale_apply_grid" title="Grid">
                                    <input type="radio" name="wsale_products_layout" t-att-checked="'checked' if layout_mode != 'list' else None"/>
                                </label>
                                <label t-attf-class="btn btn-light bg-white border #{'active' if layout_mode == 'list' else None} fa fa-th-list o_wsale_apply_list" title="List">
                                    <input type="radio" name="wsale_products_layout" t-att-checked="'checked' if layout_mode == 'list' else None"/>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                <t t-call="theme_prime.selected_attributes"/>
            </div>
            <div class="border-bottom d-none d-lg-block"/>
        </xpath>
        <xpath expr="//div[@id='products_grid_before']" position="attributes">
            <attribute name="class"></attribute>
            <attribute name="t-attf-class">col-lg-3 #{'tp-filter-sidebar border-right-0' if (tp_is_filters_activated and website._get_dr_theme_config('json_shop_filters')['in_sidebar']) else ''}</attribute>
        </xpath>
        <xpath expr="//div[hasclass('products_categories')]" position="before">
            <div class="row justify-content-between align-items-center pb-3 mt-1 mb-3 border-bottom tp-filter-sidebar-item d-none">
                <div class="col-auto">
                    <h5 class="mb-0">Filters</h5>
                </div>
                <div class="col-auto">
                    <a href="#" class="tp-filter-sidebar-toggle tp-filter-sidebar-close-btn">
                        <i class="dri dri-cross-l"/>
                    </a>
                </div>
            </div>
        </xpath>
        <xpath expr="//div[@id='products_grid']" position="attributes">
            <attribute name="t-attf-class">col #{'o_wsale_layout_list' if layout_mode == 'list' else ''} #{'' if grid_style == '1' else 'tp-custom-grid'}</attribute>
            <attribute name="t-att-data-total-pages">pager['page_count']</attribute>
        </xpath>
        <xpath expr="//t[@t-call='website_sale.products_item']" position="replace">
            <t t-set="grid_style_template" t-valuef="theme_prime.product_item_#{grid_style}"/>
            <t t-if="grid_style == '1'">
                <t t-call="website_sale.products_item">
                    <t t-set="product_image_big" t-value="td_product['x'] + td_product['y'] &gt; 2"/>
                </t>
            </t>
            <t t-else="">
                <t t-call="{{grid_style_template}}">
                    <t t-set="product_image_big" t-value="td_product['x'] + td_product['y'] &gt; 2"/>
                </t>
            </t>
        </xpath>
        <xpath expr="//div[@id='products_grid']/t[@t-else='']/div" position="replace">
            <div class="tp-hook-no-search">
                <div t-if="not search" class="my-5">
                    <div class="text-center">
                        <h1 class="mt-4">We couldn't find any product!</h1>
                        <p t-if="category">No product defined in category <span class="text-dark" t-out="category.display_name"/>.</p>
                    </div>
                    <div groups="sales_team.group_sale_manager" class="text-center mt48">
                        <div class="text-muted">Click<i>'New'</i> in the top-right corner to create your first product.</div>
                    </div>
                </div>
                <div t-else="" class="my-5">
                    <div class="text-center">
                        <div>You searched for <span class="text-primary" t-out="search"/>.</div>
                        <t t-call="theme_prime.tp_svg_no_products">
                            <t t-set="_classes" t-value="'m-5 mx-auto w-25'"/>
                        </t>
                        <h1 class="mt-4">We couldn't find any matches!</h1>
                        <p>Please check the spelling or try searching something else</p>
                    </div>
                    <div class="col-12 col-md-6 col-lg-5 mx-auto mt-4">
                        <t t-call="website.website_search_box_input">
                            <t t-set="_form_classes" t-valuef="o_wsale_products_searchbar_form w-100 mx-auto"/>
                            <t t-set="_classes" t-valuef="w-100"/>
                            <t t-set="search_type" t-valuef="products"/>
                            <t t-set="action" t-value="keep('/shop'+ ('/category/'+slug(category)) if category else None, search=0) or '/shop'"/>
                            <t t-set="display_image" t-valuef="true"/>
                            <t t-set="display_description" t-valuef="true"/>
                            <t t-set="display_extra_link" t-valuef="false"/>
                            <t t-set="display_detail" t-valuef="false"/>
                        </t>
                    </div>
                    <div groups="sales_team.group_sale_manager" class="text-center mt48">
                        <div class="text-muted">Click<i>'New'</i> in the top-right corner to create your first product.</div>
                    </div>
                </div>
            </div>
        </xpath>
    </template>

    <template id="product_item_2" name="Theme Prime: Product Item - 2">
        <t t-set="product_href" t-value="keep(product.website_url, page=(pager['page']['num'] if pager['page']['num']&gt;1 else None))" />
        <t t-set="combination_info" t-value="product._get_combination_info(only_template=True, add_qty=add_qty or 1, pricelist=pricelist)"/>

        <form action="/shop/cart/update" method="post" class="card oe_product_cart tp-product-card-style-2" t-att-data-publish="product.website_published and 'on' or 'off'" itemscope="itemscope" itemtype="http://schema.org/Product">
            <div class="card-body p-0 oe_product_image">
                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                <a t-att-href="product_href" class="d-block h-100" itemprop="url">
                    <t t-set="image_holder" t-value="product._get_image_holder()"/>
                    <span t-field="image_holder.image_1920"
                        t-options="{'widget': 'image', 'preview_image': 'image_1024' if product_image_big else 'image_512'}"
                        class="d-flex h-100 justify-content-center align-items-center tp-product-image-container"/>
                </a>
                <button t-if="website._get_dr_theme_config('json_grid_product')['show_quick_view']" type="button" role="button" class="btn btn-primary rounded-circle font-weight-bold py-2 tp-product-quick-view-action tp-product-quick-view-large-btn text-truncate" title="Quick View" t-att-data-product-id="product.id">
                    <i class="dri dri-eye mr-1 o_not_editable" role="img" aria-label="Quick View"></i> Quick View
                </button>
                <t t-if="product.dr_show_out_of_stock" t-call="theme_prime.product_stock_label">
                    <t t-set="product" t-value="product"/>
                </t>
                <t t-if="is_view_active('website_sale.product_comment') and website._get_dr_theme_config('json_grid_product')['show_rating']">
                    <t t-set="rating_stats" t-value="product.sudo().rating_get_stats()"/>
                    <div t-if="rating_stats['total']" class="o_website_rating_static grid d-none d-lg-inline-block o_not_editable" t-att-data-rating="rating_stats['avg']" t-attf-title="#{rating_stats['total']} Reviews">
                        <i class="fa fa-star"></i>
                        <span class="ml-1 text-body" t-out="'%.1f' % rating_stats['avg']"/>
                    </div>
                </t>
            </div>
            <div class="card-body rounded-bottom p-0 o_wsale_product_information">
                <div class="p-2 o_wsale_product_information_text">
                    <h6 class="o_wsale_products_item_title mb-1" style="width: 100%; table-layout: fixed; display: table !important;">
                        <a class="tp-link-dark d-block text-truncate" t-att-title="product.name" itemprop="name" t-att-href="product_href" t-att-content="product.name" t-field="product.name" />
                        <a role="button" t-if="not product.website_published" t-att-href="product_href" class="btn btn-sm btn-danger" title="This product is unpublished.">Unpublished</a>
                    </h6>
                    <div t-if="request.website._dr_has_b2b_access()" class="product_price" itemprop="offers" itemscope="itemscope" itemtype="http://schema.org/Offer">
                        <span class="h6 text-primary" t-if="combination_info['price']" t-out="combination_info['price']" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                        <small t-attf-class="text-body ml-1 {{'' if combination_info['has_discounted_price'] else 'd-none'}}" style="text-decoration: line-through; white-space: nowrap;" t-out="combination_info['list_price']" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}" />
                        <span itemprop="price" style="display:none;" t-out="combination_info['price']" />
                        <span itemprop="priceCurrency" style="display:none;" t-out="website.currency_id.name" />
                        <t t-call="theme_prime.discount_percentage"/>
                    </div>
                    <div t-else=" ">
                        <t t-call="theme_prime.tp_b2b_price_label"/>
                    </div>
                    <t t-call="theme_prime.tp_product_color_pills">
                        <t t-set="show_similar" t-value="website._get_dr_theme_config('json_grid_product')['show_similar_products'] and product.alternative_product_ids"/>
                        <t t-set="limit" t-value="4"/>
                    </t>
                    <div t-if="is_view_active('website_sale.products_description')" class="oe_subdescription" contenteditable="false">
                        <div itemprop="description" t-field="product.description_sale"/>
                    </div>
                    <t t-if="is_view_active('website_sale.product_comment') and website._get_dr_theme_config('json_grid_product')['show_rating']">
                        <t t-set="rating_stats" t-value="product.sudo().rating_get_stats()"/>
                        <div t-if="rating_stats['total']" class="o_website_rating_static list d-none d-lg-inline-block o_not_editable" t-att-data-rating="rating_stats['avg']" t-attf-title="#{rating_stats['total']} Reviews">
                            <i class="fa fa-star"></i>
                            <span class="ml-1 text-body" t-out="'%.1f' % rating_stats['avg']"/>
                        </div>
                    </t>
                </div>
                <div class="o_wsale_product_btn text-center o_not_editable">
                    <button t-if="website._get_dr_theme_config('json_grid_product')['show_quick_view']" type="button" role="button" class="btn btn-secondary tp-product-quick-view-action tp-product-quick-view-small-btn" title="Quick View" t-att-data-product-id="product.id">
                        <i class="dri dri-eye" role="img" aria-label="Quick View"></i>
                    </button>
                    <button t-if="website._get_dr_theme_config('json_grid_product')['show_similar_products'] and product.alternative_product_ids" type="button" role="button" class="btn btn-secondary tp_show_similar_products tp-product-view-similar-list-btn" title="View Similar" t-att-data-product-template-id="product.id">
                        <i class="fa fa-clone" role="img" aria-label="View Similar"></i>
                    </button>
                    <t t-set="in_wish" t-value="product._is_in_wishlist()"/>
                    <t t-set="product_variant_id" t-value="product._get_first_possible_variant_id()"/>
                    <t t-if="is_view_active('website_sale.products_add_to_cart')">
                        <input name="product_id" t-att-value="product_variant_id" type="hidden"/>
                        <t t-if="product_variant_id">
                            <a href="#" role="button" class="btn btn-secondary a-submit" aria-label="Shopping cart" title="Shopping cart">
                                <span class="dri dri-cart"/>
                            </a>
                        </t>
                    </t>
                    <button t-if="is_view_active('website_sale_wishlist.add_to_wishlist') and product_variant_id" type="button" role="button" class="btn btn-secondary o_add_wishlist" t-att-disabled='in_wish or None' title="Add to Wishlist" t-att-data-product-template-id="product.id" t-att-data-product-product-id="product_variant_id" data-action="o_wishlist"><span class="dri dri-wishlist" role="img" aria-label="Add to wishlist"></span></button>
                    <button t-if="is_view_active('website_sale_comparison.add_to_compare') and product_variant_id" type="button" role="button" class="d-none d-md-inline-block btn btn-secondary o_add_compare" title="Compare" aria-label="Compare" t-att-data-product-product-id="product_variant_id" data-action="o_comparelist"><span class="dri dri-compare"></span></button>
                </div>
            </div>
            <t t-call="theme_prime.product_label">
                <t t-set="label" t-value="product.dr_label_id"/>
            </t>
            <t t-set="bg_color" t-value="td_product['ribbon']['bg_color'] or ''"/>
            <t t-set="text_color" t-value="td_product['ribbon']['text_color']"/>
            <t t-set="bg_class" t-value="td_product['ribbon']['html_class']"/>
            <span t-attf-class="o_ribbon #{bg_class}" t-attf-style="#{text_color and ('color: %s; ' % text_color)}#{bg_color and 'background-color:' + bg_color}" t-out="td_product['ribbon']['html'] or ''"/>
        </form>
    </template>

    <template id="products_categories" inherit_id="website_sale.products_categories" name="Theme Prime: eCommerce Categories">
        <xpath expr="//div[hasclass('products_categories')]" position="attributes">
            <attribute name="class" remove="mb-lg-3" separator=" "/>
        </xpath>
        <xpath expr="//button[@data-target='#wsale_products_categories_collapse']" position="attributes">
            <attribute name="class" add="d-none" separator=" "/>
        </xpath>
        <xpath expr="//div[@id='wsale_products_categories_collapse']" position="attributes">
            <attribute name="class" add="tp-filter-attribute tp-filter-sidebar-item d-none" separator=" "/>
        </xpath>
        <xpath expr="//strong[hasclass('o_categories_collapse_title')]" position="replace">
            <h6>Categories</h6>
        </xpath>
    </template>

    <template id="categorie_link" inherit_id="website_sale.categorie_link" name="Theme Prime: Category Link">
        <xpath expr="//label[@t-field='c.name']" position="replace">
            <label class="custom-control-label font-weight-normal" t-att-for="c.id">
                <span t-field="c.name"/>
                <span class="tp-filter-count ml-1" t-if="website._get_dr_theme_config('json_shop_filters')['show_category_count'] and get_category_count.get(c.id, 0)">
                    (<t t-out="get_category_count.get(c.id, 0)"/>)
                </span>
            </label>
        </xpath>
    </template>

    <template id="products_attributes" inherit_id="website_sale.products_attributes" name="Theme Prime: Product Attribute's Filters">
        <xpath expr="//button[@data-target='#wsale_products_attributes_collapse']" position="attributes">
            <attribute name="class" add="d-none" separator=" "/>
        </xpath>
        <xpath expr="//div[@id='wsale_products_attributes_collapse']" position="replace">
            <div class="collapse d-lg-block tp-filter-sidebar-item d-none" id="wsale_products_attributes_collapse">
                <form class="js_attributes" method="get">
                    <input t-if="category" type="hidden" name="category" t-att-value="category.id" />
                    <input type="hidden" name="search" t-att-value="search" />
                    <!-- JAT: To make sorting work in lazy load -->
                    <input t-if="is_view_active('website_sale.sort') and website_sale_sortable_current" type="hidden" name="order" t-att-value="website_sale_sortable_current[0][1]" />

                    <t t-set="is_collapsible" t-value="website._get_dr_theme_config('json_shop_filters')['collapsible']"/>
                    <ul class="nav nav-pills flex-column">
                        <t t-set="dr_is_activated_hide_extra_attribute_value" t-value="website._get_dr_theme_config('json_shop_filters')['hide_extra_attrib_value']"/>
                        <t t-set="dr_is_activated_show_attribute_count" t-value="website._get_dr_theme_config('json_shop_filters')['show_attrib_count']"/>

                        <!-- Price -->
                        <li t-if="is_view_active('website_sale.filter_products_price') and available_min_price != available_max_price and website._dr_has_b2b_access()" class="nav-item tp-filter-attribute py-3 tp-hook-filter-price">
                            <t t-call="theme_prime.attribute">
                                <t t-set="string">
                                    <span>Price</span>
                                </t>
                                <t t-set="is_selected" t-value="request.httprequest.args.get('min_price') or request.httprequest.args.get('max_price')"/>

                                <t t-call="theme_prime.attribute_range">
                                    <t t-set="key" t-value="'price'"/>
                                    <t t-set="prefix" t-value="pricelist.currency_id.symbol" />
                                    <t t-set="from_value" t-value="'%.2f' % min_price"/>
                                    <t t-set="to_value" t-value="'%.2f' % max_price"/>
                                    <t t-set="min_value" t-value="'%f' % (available_min_price)"/>
                                    <t t-set="max_value" t-value="'%f' % (available_max_price)"/>
                                </t>
                            </t>
                        </li>
                        <!-- Attributes -->
                        <t t-foreach="attributes" t-as="attribute">
                            <li t-if="attribute.value_ids and len(attribute.value_ids) &gt; 1 and attribute.visibility == 'visible'" class="nav-item tp-filter-attribute py-3">
                                <t t-call="theme_prime.attribute">
                                    <t t-set="string">
                                        <span t-field="attribute.name" />
                                    </t>
                                    <t t-set="is_selected" t-value="attribute.id in attributes_ids"/>
                                    <t t-set="show_search" t-value="attribute.dr_is_show_shop_search and attribute.display_type != 'select'"/>

                                    <t t-set="name" t-value="'attribute_%s' % attribute.id"/>
                                    <t t-set="items" t-value="attribute.value_ids"/>
                                    <t t-set="selected" t-value="attrib_set"/>
                                    <t t-set="is_attribute" t-value="attribute"/>
                                    <t t-set="hide_extra_value" t-value="dr_is_activated_hide_extra_attribute_value"/>
                                    <t t-set="show_count" t-value="dr_is_activated_show_attribute_count"/>
                                    <t t-set="count_list" t-value="get_attrib_count"/>

                                    <t t-if="attribute.display_type == 'select'">
                                        <t t-call="theme_prime.attribute_select"/>
                                    </t>
                                    <t t-if="attribute.display_type in ['radio', 'pills', 'radio_circle', 'radio_square']">
                                        <t t-call="theme_prime.attribute_checkbox"/>
                                    </t>
                                    <t t-if="attribute.display_type == 'radio_image'">
                                        <t t-if="attribute.dr_radio_image_style == 'default'">
                                            <t t-call="theme_prime.attribute_checkbox"/>
                                        </t>
                                        <t t-elif="attribute.dr_radio_image_style == 'image'">
                                            <t t-set="show_image" t-value="True"/>
                                            <t t-set="image_model" t-value="'product.attribute.value'"/>
                                            <t t-set="image_field" t-value="'dr_image'"/>
                                            <t t-call="theme_prime.attribute_image"/>
                                        </t>
                                        <t t-elif="attribute.dr_radio_image_style == 'image_text'">
                                            <t t-set="show_image" t-value="True"/>
                                            <t t-set="image_model" t-value="'product.attribute.value'"/>
                                            <t t-set="image_field" t-value="'dr_image'"/>
                                            <t t-call="theme_prime.attribute_checkbox"/>
                                        </t>
                                    </t>
                                    <t t-if="attribute.display_type == 'color'">
                                        <t t-set="show_color" t-value="True"/>
                                        <t t-call="theme_prime.attribute_checkbox"/>
                                    </t>
                                </t>
                            </li>
                        </t>
                        <!-- Availability -->
                        <li t-if="website._get_dr_theme_config('json_shop_filters')['show_availability_filter']" class="nav-item tp-filter-attribute py-3 tp-hook-filter-availability">
                            <t t-call="theme_prime.attribute">
                                <t t-set="string">
                                    <span>Availability</span>
                                </t>
                                <t t-set="is_selected" t-value="selected_hide_out_of_stock"/>

                                <ul class="nav nav-pills flex-column ml-0 flex-nowrap tp-filter-attribute-scrollbar">
                                    <li class="nav-item">
                                        <div class="custom-control custom-checkbox mb-2 ml-1">
                                            <input type="checkbox" name="hide_out_of_stock" class="custom-control-input" id="hide_out_of_stock" value="1" t-att-checked="'checked' if is_selected else None"/>
                                            <label class="custom-control-label w-100" for="hide_out_of_stock">
                                                <div class="d-flex align-items-center justify-content-between">
                                                    <div class="d-flex align-items-center">
                                                        Hide out of stock
                                                    </div>
                                                </div>
                                            </label>
                                        </div>
                                    </li>
                                </ul>
                            </t>
                        </li>
                        <!-- Rating -->
                        <li t-if="website._get_dr_theme_config('json_shop_filters')['show_rating_filter'] and is_view_active('website_sale.product_comment')" class="nav-item tp-filter-attribute py-3 tp-hook-filter-rating">
                            <t t-call="theme_prime.attribute">
                                <t t-set="string">
                                    <span>Rating</span>
                                </t>
                                <t t-set="is_selected" t-value="selected_ratings"/>

                                <ul class="nav nav-pills flex-column ml-0 flex-nowrap tp-filter-attribute-scrollbar">
                                    <t t-foreach="[4,3,2,1]" t-as="rating">
                                        <li class="nav-item">
                                            <div class="custom-control custom-checkbox mb-2 ml-1">
                                                <input type="checkbox" name="rating" class="custom-control-input" t-attf-id="rating-#{rating}" t-att-value="rating" t-att-checked="'checked' if rating in selected_ratings else None"/>
                                                <label class="custom-control-label w-100" t-attf-for="rating-#{rating}">
                                                    <div class="d-flex align-items-center justify-content-between">
                                                        <div class="d-flex align-items-center">
                                                            <t t-out="rating"/>
                                                            <div class="o_website_rating_static mx-1">
                                                                <i class="fa fa-star"/>
                                                            </div>
                                                            <span> &amp; above</span>
                                                        </div>
                                                        <span class="tp-filter-count ml-1" t-if="dr_is_activated_show_attribute_count and get_ratings_count.get(rating)">
                                                            <t t-out="get_ratings_count.get(rating)"/>
                                                        </span>
                                                    </div>
                                                </label>
                                            </div>
                                        </li>
                                    </t>
                                </ul>
                            </t>
                        </li>
                        <!-- Tags -->
                        <li t-if="tags" class="nav-item tp-filter-attribute py-3 tp-hook-filter-tags">
                            <t t-call="theme_prime.attribute">
                                <t t-set="string">
                                    <span>Tags</span>
                                </t>
                                <t t-set="is_selected" t-value="selected_tags"/>
                                <t t-set="show_search" t-value="True"/>

                                <t t-set="name" t-value="'tag'"/>
                                <t t-set="items" t-value="tags"/>
                                <t t-set="selected" t-value="selected_tags"/>
                                <t t-if="website._get_dr_theme_config('json_shop_filters')['tags_style'] == '1'">
                                    <t t-call="theme_prime.attribute_checkbox"/>
                                </t>
                                <t t-if="website._get_dr_theme_config('json_shop_filters')['tags_style'] == '2'">
                                    <t t-call="theme_prime.attribute_badge"/>
                                </t>
                            </t>
                        </li>
                    </ul>
                </form>
                <div class="py-4">
                    <a class="btn btn-dark btn-block" t-att-href="'/shop/category/' + str(category.id) if category else '/shop'">RESET</a>
                </div>
                <div class="oe_structure" t-field="website.dr_sale_special_offer" data-editor-message="Drag offer blocks here to customize"/>
            </div>
        </xpath>
    </template>

    <template id="attribute" name="Theme Prime: Attribute">
        <div t-attf-class="d-flex justify-content-between align-items-center tp-filter-attribute-title #{is_collapsible and 'collapsible' or None} #{is_selected and 'expanded' or None}">
            <h6 class="mb-0">
                <span t-out="string"/>
            </h6>
            <span t-if="is_collapsible" class="tp-collapse-indicator">
                <i class="dri dri-chevron-right-l"/>
            </span>
        </div>
        <div t-attf-class="tp-filter-attribute-collapsible-area pt-3 #{is_collapsible and 'collapsible' or None}" t-attf-style="display: #{(is_selected or not is_collapsible) and 'block' or 'none'}">
            <div t-if="show_search" class="input-group input-group-sm mb-3 tp-search-input-group">
                <input type="text" class="form-control tp-search" placeholder="Search..."/>
                <div class="input-group-append">
                    <span class="input-group-text bg-white border-0">
                        <i class="dri dri-search-l text-body"/>
                    </span>
                </div>
            </div>
            <t t-out="0"/>
        </div>
    </template>

    <template id="attribute_checkbox" name="Theme Prime: Attribute List">
        <ul class="nav nav-pills flex-column ml-0 flex-nowrap tp-filter-attribute-scrollbar">
            <t t-foreach="items.sorted(lambda i: i.id in selected, reverse=True)" t-as="item">
                <li class="nav-item" t-att-data-search-term="item.name.lower()" t-if="(count_list.get(item.id) or item.id in selected) if hide_extra_value else True">
                    <div class="custom-control custom-checkbox mb-2 ml-1">
                        <input type="checkbox" t-att-name="'attrib' if is_attribute else name" class="custom-control-input" t-attf-id="#{name}-#{item.id}" t-att-value="'%s-%s' % (is_attribute.id, item.id) if is_attribute else item.id" t-att-checked="'checked' if item.id in selected else None"/>
                        <label class="custom-control-label w-100" t-attf-for="#{name}-#{item.id}">
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="d-flex align-items-center">
                                    <span t-if="show_image" class="tp-attribute-image-box border mr-1" t-attf-style="background-image: url('/website/image/#{image_model}/#{item.id}/#{image_field}');"/>
                                    <span t-if="show_color" class="tp-attribute-color-box border mr-1" t-attf-style="background-color: #{item.html_color or item.name}"/>
                                    <span t-field="item.name"/>
                                </div>
                                <span class="tp-filter-count ml-1" t-if="show_count and count_list.get(item.id)">
                                    <t t-out="count_list.get(item.id)"/>
                                </span>
                            </div>
                        </label>
                    </div>
                </li>
            </t>
        </ul>
    </template>

    <template id="attribute_select" name="Theme Prime: Attribute Select">
        <select class="form-control" t-att-name="'attrib' if is_attribute else name">
            <option value="" />
            <t t-foreach="items" t-as="item" t-if="count_list.get(item.id) if hide_extra_value else True">
                <option t-attf-id="#{name}-#{item.id}" t-att-value="'%s-%s' % (is_attribute.id, item.id) if is_attribute else item.id" t-out="item.name" t-att-selected="item.id in selected" />
            </t>
        </select>
    </template>

    <template id="attribute_image" name="Theme Prime: Attribute Image">
        <ul class="nav nav-pills ml-0 tp-filter-attribute-scrollbar tp-filter-image-style">
            <t t-foreach="items.sorted(lambda i: i.id in selected, reverse=True)" t-as="item">
                <li class="nav-item m-1" t-att-data-search-term="item.name.lower()" t-if="count_list.get(item.id) if hide_extra_value else True">
                    <input type="checkbox" t-att-name="'attrib' if is_attribute else name" class="d-none" t-attf-id="#{name}-#{item.id}" t-att-value="'%s-%s' % (is_attribute.id, item.id) if is_attribute else item.id" t-att-checked="'checked' if item.id in selected else None"/>
                    <label class="mb-0" t-attf-for="#{name}-#{item.id}">
                        <img class="p-1 w-100" t-att-title="item.name" t-attf-src="/website/image/#{image_model}/#{item.id}/#{image_field}"/>
                    </label>
                </li>
            </t>
        </ul>
    </template>

    <template id="attribute_badge" name="Theme Prime: Attribute Badge">
        <ul class="nav nav-pills ml-0 tp-filter-attribute-scrollbar">
            <t t-foreach="items.sorted(lambda i: i.id in selected, reverse=True)" t-as="item">
                <li class="nav-item m-1" t-att-data-search-term="item.name.lower()">
                    <input type="checkbox" t-att-name="name" class="d-none" t-attf-id="#{name}-#{item.id}" t-att-value="item.id" t-att-checked="'checked' if item.id in selected else None"/>
                    <label t-attf-class="mb-0 badge badge-pill badge-#{'primary' if item.id in selected else 'light'} tp-cursor-pointer" t-attf-for="#{name}-#{item.id}"><span t-out="item.name"/></label>
                </li>
            </t>
        </ul>
    </template>

    <template id="attribute_range" name="Theme Prime: Attribute Range">
        <div class="tp-range-filter">
            <div class="tp-slider" t-att-data-key="key" t-att-data-min="min_value" t-att-data-max="max_value" t-att-data-from="from_value" t-att-data-to="to_value" t-att-data-prefix="prefix" />
            <div class="form-row align-items-center justify-content-center mt-2">
                <div class="form-group col-5">
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <div class="input-group-text bg-transparent" t-out="prefix"/>
                        </div>
                        <input type="text" class="form-control min" t-att-value="from_value" placeholder="From"/>
                    </div>
                </div>
                <div class="form-group col-1 text-center">
                    -
                </div>
                <div class="form-group col-5">
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <div class="input-group-text bg-transparent" t-out="prefix"/>
                        </div>
                        <input type="text" class="form-control max" t-att-value="to_value" placeholder="To"/>
                    </div>
                </div>
            </div>
            <button type="submit" class="btn btn-sm btn-primary apply float-right">FILTER</button>
            <div class="text-danger tp-validate-msg"/>
            <input t-if="request.httprequest.args.get('min_%s' % key)" type="hidden" t-attf-name="min_#{key}" t-att-value="from_value"/>
            <input t-if="request.httprequest.args.get('max_%s' % key)" type="hidden" t-attf-name="max_#{key}" t-att-value="to_value"/>
        </div>
    </template>

    <template id="filter_products_price" name="Theme Prime: Filter by Prices" inherit_id="website_sale.filter_products_price">
        <xpath expr="//div[@t-if='available_min_price != available_max_price']" position="replace"/>
    </template>

    <template id="add_to_wishlist" inherit_id="website_sale_wishlist.add_to_wishlist" name="Theme Prime: Wishlist Button">
        <xpath expr="//span[hasclass('fa-heart')]" position="replace">
            <span class="dri dri-wishlist"/>
        </xpath>
    </template>

    <template id="add_to_compare" inherit_id="website_sale_comparison.add_to_compare" name="Theme Prime: Comparison Button">
        <xpath expr="//span[hasclass('fa-exchange')]" position="replace">
            <span class="dri dri-compare"/>
        </xpath>
    </template>

    <!--
    ============================================================================
    Product Detail Page
    ============================================================================
    -->
    <template id="product" inherit_id="website_sale.product">
        <xpath expr="//div[@id='wrap']" position="before">
            <div class="mb-2 mb-md-3 bg-100 border-bottom border-top py-1" style="border-color: #e5e5e5 !important;">
                <div class="container">
                    <div class="row justify-content-center justify-content-md-between align-items-center">
                        <div class="col-auto">
                            <ol class="breadcrumb mb-0 bg-transparent">
                                <li class="breadcrumb-item">
                                    <a href="/"><i class="dri dri-home-l"/></a>
                                </li>
                                <li class="breadcrumb-item">
                                    <a t-att-href="keep(category=0)">Shop</a>
                                </li>
                                <li t-if="category" class="breadcrumb-item">
                                    <a t-att-href="keep('/shop/category/%s' % slug(category), category=0)" t-field="category.name"/>
                                </li>
                                <li class="breadcrumb-item active">
                                    <span t-field="product.name"/>
                                </li>
                            </ol>
                        </div>
                        <div class="col-auto tp-product-navigator my-2" t-if="website._get_dr_theme_config('bool_show_products_nav')">
                            <a t-attf-class="btn btn-link btn-sm #{prev_product_id and 'tp-natigation-btn' or 'disabled'}" t-att-href="prev_product_id.website_url" data-content-id="prev"><i class="fa fa-angle-left" style="font-size: 20px;"/></a>
                            <div t-if="prev_product_id" class="media align-items-center d-none" data-content-id="prev">
                                <img t-attf-src="/web/image/product.template/#{prev_product_id.id}/image_128" style="width: 84px; height: 84px; object-fit: cover;" t-att-alt="prev_product_id.name"/>
                                <div class="media-body py-1 px-3">
                                    <h6 class="mb-1"><t t-out="prev_product_id.name"/></h6>
                                    <div t-if="request.website._dr_has_b2b_access()">
                                        <t t-set="prev_product_combination_info" t-value="prev_product_id._get_combination_info(only_template=True, add_qty=1, pricelist=pricelist)"/>
                                        <h6 class="text-primary d-inline-block mb-0" t-out="prev_product_combination_info['price']" t-options="{'widget': 'monetary', 'display_currency': website.pricelist_id.currency_id}"/>
                                        <small t-attf-class="oe_default_price ml-1 {{'' if prev_product_combination_info['has_discounted_price'] else 'd-none'}}" style="text-decoration: line-through; white-space: nowrap;" t-out="prev_product_combination_info['list_price']" t-options="{'widget': 'monetary', 'display_currency': website.pricelist_id.currency_id}"/>
                                        <t t-call="theme_prime.discount_percentage">
                                            <t t-set="combination_info" t-value="prev_product_combination_info"/>
                                        </t>
                                    </div>
                                    <div t-else=" ">
                                        <t t-call="theme_prime.tp_b2b_price_label"/>
                                    </div>
                                </div>
                            </div>
                            <a class="btn btn-link btn-sm" title="Back to products" href="/shop"><i class="dri dri-category"/></a>
                            <a t-attf-class="btn btn-link btn-sm #{next_product_id and 'tp-natigation-btn' or 'disabled'}" t-att-href="next_product_id.website_url" data-content-id="next"><i class="fa fa-angle-right" style="font-size: 20px;"/></a>
                            <!-- To-do make 1 templ for both popover -->
                            <div t-if="next_product_id" class="media align-items-center d-none" data-content-id="next">
                                <img t-attf-src="/web/image/product.template/#{next_product_id.id}/image_128" style="width: 84px; height: 84px; object-fit: cover;" t-att-alt="next_product_id.name"/>
                                <div class="media-body py-1 px-3">
                                    <h6 class="mb-1"><t t-out="next_product_id.name"/></h6>
                                    <div t-if="request.website._dr_has_b2b_access()">
                                        <t t-set="next_product_combination_info" t-value="next_product_id._get_combination_info(only_template=True, add_qty=1, pricelist=pricelist)"/>
                                        <h6 class="text-primary d-inline-block mb-0" t-out="next_product_combination_info['price']" t-options="{'widget': 'monetary', 'display_currency': website.pricelist_id.currency_id}"/>
                                        <small t-attf-class="oe_default_price ml-1 {{'' if next_product_combination_info['has_discounted_price'] else 'd-none'}}" style="text-decoration: line-through; white-space: nowrap;" t-out="next_product_combination_info['list_price']" t-options="{'widget': 'monetary', 'display_currency': website.pricelist_id.currency_id}"/>
                                        <t t-call="theme_prime.discount_percentage">
                                            <t t-set="combination_info" t-value="next_product_combination_info"/>
                                        </t>
                                    </div>
                                    <div t-else=" ">
                                        <t t-call="theme_prime.tp_b2b_price_label"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </xpath>

        <xpath expr="//section[@id='product_detail']" position="attributes">
            <attribute name="t-attf-class" remove="py-4" separator=" " />
        </xpath>

        <xpath expr="//section[@id='product_detail']/div[hasclass('row')]" position="attributes">
            <attribute name="t-if">False</attribute>
        </xpath>

        <xpath expr="//div[@id='product_details']" position="attributes">
            <attribute name="class">col-12 col-lg-6 py-2</attribute>
        </xpath>
        <xpath expr="//div[hasclass('row')]/div[hasclass('col-md-6')]" position="attributes">
            <attribute name="class">col-12 col-lg-6 pb-2</attribute>
        </xpath>

        <xpath expr="//h1[@t-field='product.name']" position="before">
            <t t-call="theme_prime.product_label">
                <t t-set="label" t-value="product.dr_label_id"/>
                <t t-set="style" t-value="'1'"/>
                <t t-set="_classes" t-value="'mb-3 flat'"/>
            </t>
        </xpath>

        <xpath expr="//h1[@t-field='product.name']" position="attributes">
            <attribute name="class">h3</attribute>
        </xpath>

        <xpath expr="//t[@t-placeholder='select']" position="before">
            <t t-set="product_pricelist_offer" t-value="product._get_product_pricelist_offer()"/>
            <div t-if="product_pricelist_offer" class="row pt-2 no-gutters">
                <div class="col-12">
                    <h6 t-field="product_pricelist_offer['rule'].dr_offer_msg"/>
                </div>
            </div>
            <div t-if="product_pricelist_offer" class="row style-4 tp-countdown pt-2 no-gutters" data-countdown-style="s_countdown_4" t-att-data-due-date="product_pricelist_offer['date_end']">
                <div class="col-12 mt-3 tp-end-msg-container css_non_editable_mode_hidden">
                    <h6 class="mb-0" t-field="product_pricelist_offer['rule'].dr_offer_finish_msg"/>
                </div>
            </div>
            <hr/>
        </xpath>

        <xpath expr="//div[@id='add_to_cart_wrap']" position="attributes">
            <attribute name="class" add="d-block my-3" remove="d-inline" separator=" "/>
        </xpath>
        <xpath expr="//a[@id='add_to_cart']" position="replace">
            <a role="button" id="add_to_cart" class="btn btn-primary btn-lg js_check_product a-submit d-block d-sm-inline-block w-100 w-md-50 flex-grow-1" href="#">
                <i class="dri dri-cart"/> Add to Cart
            </a>
            <a t-if="is_view_active('website_sale.product_buy_now')" role="button" class="btn btn-primary-soft btn-lg o_we_buy_now mt-3 mt-md-0 d-block d-md-inline-block w-md-auto ml-0 ml-md-2" href="#">
                <i class="dri dri-bolt"/> Buy Now
            </a>
            <t t-set="product_variant" t-value="product_variant or product._create_first_product_variant()"/>
            <button t-if="product_variant and is_view_active('website_sale_comparison.add_to_compare')" type="button" role="button" class="d-none d-md-inline-block btn btn-primary-soft btn-lg ml-2 o_add_compare_dyn" aria-label="Compare" t-att-data-product-product-id="product_variant.id" data-action="o_comparelist">
                <span class="dri dri-compare"/>
            </button>
        </xpath>

        <xpath expr="//div[@id='o_product_terms_and_share']" position="before">
            <!-- Brand -->
            <t t-if="product.dr_brand_value_id">
                <hr class="mt-2"/>
                <div class="row align-items-center">
                    <div class="col-6 col-md-3" t-if="product.dr_brand_value_id.dr_image" t-field="product.dr_brand_value_id.dr_image" t-options="{'widget': 'image'}"/>
                    <div class="col-12 col-md-9 mt-2 mt-md-0">
                        <h6>
                            <a class="tp-link-dark" t-attf-href="/shop?attrib=#{product.dr_brand_value_id.attribute_id.id}-#{product.dr_brand_value_id.id}">
                                <span t-field="product.dr_brand_value_id.name"/>
                            </a>
                        </h6>
                        <p class="mb-0" t-field="product.dr_brand_value_id.dr_brand_description"/>
                    </div>
                </div>
                <hr/>
            </t>
            <!-- Offers -->
            <t t-if="website._get_dr_theme_config('bool_product_offers') and product.dr_product_offer_ids">
                <div class="row">
                    <t t-foreach="product.dr_product_offer_ids" t-as="offer">
                        <div class="col-12 o_not_editable">
                            <i t-attf-class="fa fa-#{offer.icon} text-primary"/>
                            <h6 class="d-inline-block mx-1" t-field="offer.name"/>
                            <span class="d-inline-block" t-field="offer.description"/>
                            <a href="#" class="d-inline-block mx-1 tp-lazy-dialog" data-res-model="dr.website.content" t-att-data-res-id="offer.id" data-field="content"><h6 class="text-primary"> Details <i class="fa fa-angle-right"></i></h6></a>
                        </div>
                    </t>
                </div>
                <hr class="mt-2"/>
            </t>
            <!-- Terms and conditions -->
            <t t-if="is_view_active('website_sale.product_custom_text')">
                <div class="row">
                    <div class="col-12">
                        <h6><a href="/terms" class="tp-link-dark">Terms and Conditions</a></h6>
                    </div>
                    <div class="col-12">
                        <section>
                            <div class="row">
                                <div class="col-auto text-center my-1">
                                    <img class="img-fluid" src="/theme_prime/static/src/img/content/tag_icon.svg"/>
                                    <div class="mt-2">
                                        100% Original
                                    </div>
                                </div>
                                <div class="col-auto text-center my-1">
                                    <img class="img-fluid" src="/theme_prime/static/src/img/content/return_icon.svg"/>
                                    <div class="mt-2">
                                        30 Days Return
                                    </div>
                                </div>
                                <div class="col-auto text-center my-1">
                                    <img class="img-fluid" src="/theme_prime/static/src/img/content/delivery_icon.svg"/>
                                    <div class="mt-2">
                                        Free Delivery
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
                <hr/>
            </t>
            <!-- Extra fields -->
            <t t-call="theme_prime.product_extra_fields" />

            <!-- Tags -->
            <div t-if="product.dr_tag_ids" class="row">
                <div class="col-12">
                    <h6 class="mr-2 mb-0 d-inline-block">Tags :</h6>
                    <ul class="list-inline d-inline">
                        <li t-foreach="product.dr_tag_ids" t-as="tag" class="list-inline-item mb-1 mr-1">
                            <a t-attf-href="/shop?tag=#{tag.id}" class="tp-link-body"><span t-field="tag.name"/></a>
                            <t t-if="not tag_last">
                                ,
                            </t>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- Share -->
            <div t-if="is_view_active('website_sale.product_share_buttons')" class="row no-gutters align-items-center">
                <div class="col-auto">
                    <h6 class="mr-2 mb-0">Share :</h6>
                </div>
                <div class="col-auto">
                    <t t-snippet-call="website.s_share">
                        <t t-set="_exclude_share_links" t-value="['whatsapp', 'linkedin']"/>
                        <t t-set="_no_title" t-value="True"/>
                        <t t-set="_classes" t-valuef="d-inline-block"/>
                        <t t-set="_link_classes" t-valuef="d-inline-block"/>
                    </t>
                </div>
            </div>
        </xpath>

        <xpath expr="//div[@id='product_full_description']" position="attributes">
            <attribute name="t-if">False</attribute>
        </xpath>

        <xpath expr="//section[@id='product_detail']" position="after">
            <div class="container-fluid px-0 my-4 tp-hook-product-tabs">
                <div class="row no-gutters">
                    <div class="col-12">
                        <t t-call="theme_prime.product_tabs"/>
                    </div>
                </div>
            </div>
            <div class="container tp-hook-accessory-products">
                <div class="row">
                    <t t-set="has_alternative_products" t-value="is_view_active('website_sale.recommended_products') and product._get_website_alternative_product()"></t>
                    <t t-set="has_accessory_products" t-value="product.accessory_product_ids"></t>
                    <t t-set="has_two_blocks" t-value="has_alternative_products and has_accessory_products"></t>
                    <div t-if="has_alternative_products" t-attf-class="#{'col-md-6' if has_accessory_products else 'col-md-12'} my-3">
                        <div class="tp-suggested-product-slider tp-snippet-shiftless-enable" t-attf-data-selection-info='{"selectionType":"manual", "recordsIDs":#{product._get_website_alternative_product().ids}}' t-att-data-two-block="has_two_blocks">
                            <div class="position-relative">
                                <h5 class="tp-underline-title">Similar Products</h5>
                                <div class="tp-slider-controls">
                                    <button class="btn btn-link text-primary tp-prev" role="button" aria-label="Prev"><i class="fa fa-chevron-left"></i></button>
                                    <button class="btn btn-link text-primary tp-next" role="button" aria-label="Next"><i class="fa fa-chevron-right"></i></button>
                                </div>
                            </div>
                            <div class="tp-suggested-products-cards owl-carousel owl-theme owl-loaded d-none"/>
                        </div>
                    </div>
                    <div t-if="has_accessory_products" t-attf-class="#{'col-md-6' if has_alternative_products else 'col-md-12'} my-3">
                        <div class="tp-suggested-product-slider tp-snippet-shiftless-enable" t-attf-data-selection-info='{"selectionType":"manual", "recordsIDs":#{product.accessory_product_ids.mapped("product_tmpl_id").ids}}' t-att-data-two-block="has_two_blocks">
                            <div class="position-relative">
                                <h5 class="tp-underline-title">Accessory Products</h5>
                                <div class="tp-slider-controls">
                                    <button class="btn btn-link text-primary tp-prev" role="button" aria-label="Prev"><i class="fa fa-chevron-left"></i></button>
                                    <button class="btn btn-link text-primary tp-next" role="button" aria-label="Next"><i class="fa fa-chevron-right"></i></button>
                                </div>
                            </div>
                            <div class="tp-suggested-products-cards owl-carousel owl-theme owl-loaded d-none"/>
                        </div>
                    </div>
                </div>
            </div>
            <div t-if="website._get_dr_theme_config('bool_sticky_add_to_cart') and website._dr_has_b2b_access()" class="tp-sticky-add-to-cart position-fixed shadow-lg border rounded-pill p-2 css_editable_mode_hidden" style="display: none;">
                <div class="d-flex align-items-center">
                    <a class="mr-2" href="#">
                        <img t-attf-src="/web/image/product.template/#{product.id}/image_128" class="rounded-circle border product-img" t-att-alt="product.name"/>
                    </a>
                    <div class="mr-2">
                        <h6 class="text-truncate product-name" t-out="product.name"/>
                        <h6 class="mb-0 text-primary">
                            <span class="product-price" t-out="combination_info['price']" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                        </h6>
                    </div>
                    <a href="#" class="btn btn-primary-soft rounded-pill product-add-to-cart">
                        <i class="dri dri-cart"/>
                    </a>
                </div>
            </div>
        </xpath>
    </template>

    <template id="product_extra_fields" name="Theme Prime: Product Extra Fields">
        <div class="dr_extra_fields o_not_editable">
            <t t-if="any([product[field.name] or (field.name == 'default_code' and product_variant.default_code) for field in website.shop_extra_field_ids])">
                <div t-foreach="website.shop_extra_field_ids" t-as="field" t-if="product[field.name] or (field.name == 'default_code' and product_variant.default_code)" class="row">
                    <div class="col-12 mb-2">
                        <h6 class="mr-2 d-inline-block mb-0" t-if="field.field_id.name != 'default_code'"><t t-out="field.dr_label or field.label"/> :</h6>
                        <t t-if="field.name == 'public_categ_ids'">
                            <t t-foreach="product.public_categ_ids" t-as="extra_categ">
                                <t t-if="extra_categ_index != 0"> , </t>
                                <a class="tp-link-body" t-attf-href="/shop/category/#{slug(extra_categ)}" t-out="extra_categ.name"/>
                            </t>
                        </t>
                        <t t-elif="field.name == 'default_code'">
                            <t t-if="product_variant.default_code">
                                <h6 class="mr-2 d-inline-block mb-0"><t t-out="field.dr_label or field.label"/> :</h6>
                                <span t-out="product_variant[field.name]"/>
                            </t>
                        </t>
                        <t t-elif="field.field_id.ttype != 'binary'">
                            <span t-out="product[field.name]" t-options="{'widget': field.field_id.ttype}"/>
                        </t>
                        <a t-else="" target="_blank" class="tp-link-body" t-attf-href="/web/content/product.template/#{product.id}/#{field.name}?download=1">
                            <i class="fa fa-download"></i>
                        </a>
                    </div>
                </div>
            </t>
        </div>
    </template>

    <template id="product_tabs" name="Theme Prime: Product Tabs">
        <div class="tp-product-details-tab">
            <ul class="nav nav-tabs justify-content-center" role="tablist">
                <li groups="base.group_public,base.group_portal" t-if="product.website_description" class="nav-item o_not_editable">
                    <a class="nav-link active" data-toggle="tab" href="#tp-product-description-tab" role="tab" aria-selected="true">
                        <div class="my-1 tp-tab-title">
                            <span class="fa fa-file-text-o mr-1"/>
                            Description
                        </div>
                    </a>
                </li>
                <li groups="base.group_user" class="nav-item o_not_editable">
                    <a class="nav-link active" data-toggle="tab" href="#tp-product-description-tab" role="tab" aria-selected="true">
                        <div class="my-1 tp-tab-title">
                            <span class="fa fa-file-text-o mr-1"/>
                            Description
                        </div>
                    </a>
                </li>
                <li t-if="is_view_active('website_sale_comparison.product_attributes_body')" class="nav-item o_not_editable">
                    <a class="nav-link" data-toggle="tab" href="#tp-product-specification-tab" role="tab" aria-selected="false">
                        <div class="my-1 tp-tab-title">
                            <span class="fa fa-sliders mr-1"/>
                            Specifications
                        </div>
                    </a>
                </li>
                <t t-set="product_documents_ids" t-value="product.sudo().dr_document_ids"/>
                <li t-if="product_documents_ids" class="nav-item o_not_editable">
                    <a class="nav-link" data-toggle="tab" href="#tp-product-documents-tab" role="tab" aria-selected="false">
                        <div class="my-1 tp-tab-title">
                            <span class="fa fa-file-pdf-o mr-1"/>
                            Documents
                        </div>
                    </a>
                </li>
                <li t-if="is_view_active('website_sale.product_comment')" class="nav-item o_not_editable">
                    <a class="nav-link" data-toggle="tab" href="#tp-product-rating-tab" role="tab" aria-selected="false">
                        <div class="my-1 tp-tab-title">
                            <span class="fa fa-comments-o mr-1"/>
                            Reviews &amp; Rating
                        </div>
                    </a>
                </li>
                <!-- Dynamic Tabs -->
                <li t-foreach="product.dr_product_tab_ids" t-as="tab" class="nav-item o_not_editable">
                    <a class="nav-link" data-toggle="tab" t-attf-href="#tp-product-tab-#{tab.id}" role="tab" aria-selected="false">
                        <div class="my-1 tp-tab-title">
                            <span t-attf-class="fa fa-#{tab.icon} mr-1"/>
                            <span t-field="tab.name"/>
                        </div>
                    </a>
                </li>
            </ul>
            <div class="tab-content">
                <!-- Description -->
                <div groups="base.group_public,base.group_portal" t-if="product.website_description" class="tab-pane fade show active" id="tp-product-description-tab" role="tabpanel">
                    <div class="container-fluid">
                        <div class="row m-0 py-2">
                            <div class="col-12">
                                <div itemprop="description" t-field="product.website_description" class="oe_structure" id="product_full_description" />
                            </div>
                        </div>
                    </div>
                </div>
                <div groups="base.group_user" class="tab-pane fade show active" id="tp-product-description-tab" role="tabpanel">
                    <div class="container-fluid">
                        <div class="row m-0 py-2">
                            <div class="col-12">
                                <div itemprop="description" t-field="product.website_description" class="oe_structure" id="product_full_description" />
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Specifications -->
                <div t-if="is_view_active('website_sale_comparison.product_attributes_body')" class="tab-pane fade" id="tp-product-specification-tab" role="tabpanel">
                    <section class="container border-0" id="product_full_spec">
                        <t t-set="categories" t-value="product.valid_product_template_attribute_line_ids._prepare_categories_for_display()"/>
                        <t t-if="categories">
                            <div class="row py-4">
                                <div class="col-12 col-lg-8 offset-lg-2" id="product_specifications">
                                    <table class="table mb-0 border">
                                        <t t-foreach="categories" t-as="categ">
                                            <t t-if="len(categories) > 1">
                                                <tr class="shadow-sm bg-light">
                                                    <th class="text-left" t-att-colspan="2">
                                                        <span t-if="categ" t-field="categ.name"/>
                                                        <span t-else="">Uncategorized</span>
                                                    </th>
                                                </tr>
                                            </t>
                                            <tr t-foreach="categories[categ].filtered(lambda l: len(l.value_ids) > 1)" t-as="ptal">
                                                <td><span t-field="ptal.attribute_id.name"/></td>
                                                <td>
                                                    <t t-foreach="ptal.value_ids" t-as="pav">
                                                        <span t-field="pav.name"/><t t-if="not pav_last"> or</t>
                                                    </t>
                                                </td>
                                            </tr>
                                            <t t-set="single_value_attributes" t-value="categories[categ]._prepare_single_value_for_display()"/>
                                            <tr t-foreach="single_value_attributes" t-as="attribute">
                                                <td><span t-field="attribute.name"/></td>
                                                <td>
                                                    <t t-foreach="single_value_attributes[attribute]" t-as="ptal">
                                                        <span t-field="ptal.product_template_value_ids._only_active().name"/><t t-if="not ptal_last">, </t>
                                                    </t>
                                                </td>
                                            </tr>
                                        </t>
                                    </table>
                                </div>
                            </div>
                        </t>
                        <div class="p-4 text-center" t-else="">
                            No Specifications
                        </div>
                    </section>
                </div>
                <!-- Documents -->
                <div t-if="product_documents_ids" class="tab-pane fade" id="tp-product-documents-tab" role="tabpanel">
                    <div class="container">
                        <div class="row py-4">
                            <t t-foreach="product_documents_ids" t-as="document">
                                <div class="col-12 col-sm-6 col-md-4 col-lg-3 my-2">
                                    <div class="d-flex align-items-center p-2 border">
                                        <div class="o_image" t-att-data-mimetype="document.mimetype"/>
                                        <div class="ml-2 text-truncate">
                                            <div t-field="document.name" t-att-title="document.name"/>
                                            <a t-attf-href="/web/content/#{document.id}?download=true" class="btn btn-primary-soft btn-sm mt-1">
                                                <i class="fa fa-download"/> Download
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </t>
                        </div>
                    </div>
                </div>
                <!-- Rating -->
                <div t-if="is_view_active('website_sale.product_comment')" class="tab-pane fade" id="tp-product-rating-tab" role="tabpanel">
                    <div class="o_shop_discussion_rating container">
                        <section class="container">
                            <div class="row mt-4">
                                <div class="col-lg-8 offset-lg-2">
                                    <t t-call="portal.message_thread">
                                        <t t-set="object" t-value="product"/>
                                        <t t-set="display_rating" t-value="True"/>
                                    </t>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
                <!-- Dynamic Tabs -->
                <div t-foreach="product.dr_product_tab_ids" t-as="tab" class="tab-pane fade" t-attf-id="tp-product-tab-#{tab.id}" role="tabpanel">
                    <div class="container-fluid">
                        <div class="row m-0 py-2">
                            <div class="col-12">
                                <div t-field="tab.content"/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <template id="shop_product_carousel" inherit_id="website_sale.shop_product_carousel">
        <xpath expr="//div[@id='o-carousel-product']" position="attributes">
            <attribute name="class" add="tp-drift-zoom tp-product-detail-carousel" remove="mb-3" separator=" " />
        </xpath>
        <xpath expr="//div[hasclass('carousel-inner')]//div[@t-else='']" position="replace">
            <!-- For zoom -->
            <div t-else="" class="d-flex align-items-center justify-content-center h-100">
                <div t-field="product_image.image_1920" class="d-flex align-items-center justify-content-center h-100 position-relative" t-options='{"widget": "image", "preview_image": "image_1024", "class": "product_detail_img mh-100 tp-drift-zoom-img", "alt-field": "name", "zoom": product_image.can_image_1024_be_zoomed and "image_1920", "itemprop": "image"}'/>
            </div>
        </xpath>
    </template>

    <template id="product_price" inherit_id="website_sale.product_price">
        <xpath expr="//div[hasclass('product_price')]" position="replace">
            <div t-if="request.website._dr_has_b2b_access()" itemprop="offers" itemscope="itemscope" itemtype="http://schema.org/Offer" class="product_price d-inline-block mt-2">
                <h3 class="css_editable_mode_hidden h4">
                    <span class="oe_price" style="white-space: nowrap;" t-out="combination_info['price']" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                    <span itemprop="price" style="display:none;" t-out="combination_info['price']"/>
                    <span itemprop="priceCurrency" style="display:none;" t-out="website.currency_id.name"/>
                    <span t-attf-class="text-body oe_default_price ml-1 small {{'' if combination_info['has_discounted_price'] else 'd-none'}}" style="text-decoration: line-through; white-space: nowrap;"
                        t-out="combination_info['list_price']" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"
                    />
                </h3>
                <h3 class="css_non_editable_mode_hidden decimal_precision h4" t-att-data-precision="str(website.currency_id.decimal_places)">
                    <span t-field="product.list_price"
                        t-options='{
                        "widget": "monetary",
                        "display_currency": product.currency_id,
                    }'/>
                </h3>
            </div>
            <div class="h3" t-else=" ">
                <t t-call="theme_prime.tp_b2b_price_label"/>
            </div>
        </xpath>
    </template>

    <template id="product_buy_now" inherit_id="website_sale.product_buy_now" name="Theme Prime: Buy Now Button">
        <xpath expr="//a[hasclass('o_we_buy_now')]" position="replace"/>
    </template>

    <template id="product_add_to_compare" inherit_id="website_sale_comparison.product_add_to_compare" name="Theme Prime: Add to comparison in product page">
        <xpath expr="//t[@t-call='website_sale_comparison.add_to_compare_button']" position="replace"/>
    </template>

    <template id="product_add_to_wishlist" inherit_id="website_sale_wishlist.product_add_to_wishlist" name="Theme Prime: Add to wishlist in product page">
        <xpath expr="//button[hasclass('o_add_wishlist_dyn')]" position="replace">
            <button t-if="product_variant" type="button" role="button" class="btn btn-primary-soft o_add_wishlist_dyn mt16 ml-0 ml-sm-2" t-att-disabled='in_wish or None' t-att-data-product-template-id="product.id" t-att-data-product-product-id="product_variant.id" data-action="o_wishlist">
                <span class="dri dri-wishlist" role="img" aria-label="Add to wishlist"/>
            </button>
        </xpath>
    </template>

    <template id="product_custom_text" inherit_id="website_sale.product_custom_text" name="Theme Prime: Terms and Conditions">
        <xpath expr="//div[@id='product_details']//p[hasclass('h6')]" position="replace"/>
    </template>

    <template id="product_share_buttons" inherit_id="website_sale.product_share_buttons" name="Theme Prime: Share Buttons">
        <xpath expr="//div[@id='product_details']//div[hasclass('h4')]" position="replace"/>
    </template>

    <template id="recommended_products" inherit_id="website_sale.recommended_products" name="Theme Prime: Alternative Products">
        <xpath expr="//t[@t-set='alternative_products']" position="replace">
            <t t-set="alternative_products" t-value="False"/>
        </xpath>
    </template>

    <template id="product_attributes_body" inherit_id="website_sale_comparison.product_attributes_body" name="Theme Prime: Product attributes table">
        <xpath expr="//section[@id='product_full_spec']" position="replace"/>
    </template>

    <template id="product_comment" inherit_id="website_sale.product_comment" name="Theme Prime: Discussion and Rating">
        <xpath expr="//div[hasclass('o_shop_discussion_rating')]" position="replace"/>
    </template>

    <template id="ecom_show_extra_fields" inherit_id="website_sale.ecom_show_extra_fields" name="Theme Prime: Show Extra Fields">
        <xpath expr="//t[@t-if='any([product[field.name] for field in website.shop_extra_field_ids])']" position="replace"/>
    </template>

    <!--
    ============================================================================
    Cart Page
    ============================================================================
    -->
    <template id="cart" inherit_id="website_sale.cart" name="Shopping Cart">
        <xpath expr="//div[@id='wrap']//div[@id='oe_structure_website_sale_cart_1']" position="replace"/>
        <xpath expr="//div[@id='wrap']/div[hasclass('container')]" position="before">
            <div class="oe_structure" id="oe_structure_website_sale_cart_1">
                <section class="s_title parallax s_parallax_is_fixed bg-black-50 pt24 pb24" data-vcss="001" data-snippet="s_title" data-scroll-background-ratio="1">
                    <span class="s_parallax_bg oe_img_bg" style="background-image: url('/web/image/website.s_banner_default_image'); background-position: 50% 0;"/>
                    <div class="o_we_bg_filter bg-black-50"/>
                    <div class="container">
                        <h1>Shopping Cart</h1>
                    </div>
                </section>
            </div>
        </xpath>
    </template>

    <template id="cart_lines" inherit_id="website_sale.cart_lines" name="Shopping Cart Lines">
        <xpath expr="//table[@id='cart_products']" position="attributes">
            <attribute name="class" remove="table-striped table-sm" separator=" "/>
        </xpath>
        <xpath expr="//table[@id='cart_products']/thead" position="attributes">
            <attribute name="class">thead-light</attribute>
        </xpath>
        <xpath expr="//table[@id='cart_products']/tbody//td[hasclass('td-product_name')]" position="replace">
            <td t-if="line.product_id.product_tmpl_id" class='td-product_name'>
                <div>
                    <a t-att-href="line.product_id.website_url" class="tp-link-dark">
                        <span t-field="line.name_short" />
                    </a>
                </div>
                <t t-call="website_sale.cart_line_description_following_lines">
                    <t t-set="div_class" t-value="'d-none d-md-block'"/>
                </t>
                <ul class="list-inline mt-2 mb-0 d-none d-md-block">
                    <t t-foreach="line.product_id.product_template_variant_value_ids" t-as="att">
                        <li class="list-inline-item mb-1">
                            <span class="badge badge-light border text-body"><t t-out="att.attribute_id.name"/>: <t t-out="att.name"/></span>
                        </li>
                    </t>
                </ul>
            </td>
        </xpath>
        <xpath expr="//table[@id='cart_products']/tbody//td[hasclass('td-action')]/a" position="replace">
            <a href="#" aria-label="Remove from cart" title="Remove from cart" class="js_delete_product no-decoration text-danger">
                <i class="dri dri-cross-l"></i>
            </a>
        </xpath>
    </template>

    <template id="cart_lines_subtotal" inherit_id="website_sale.cart_lines" customize_show="True" active="True" name="Show Subtotal in Cart Lines">
        <xpath expr="//table[@id='cart_products']/thead/tr/th[last()]" position="before">
            <th class="text-center th-subtotal">Subtotal</th>
        </xpath>
        <xpath expr="//table[@id='cart_products']/tbody//tr/td[last()]" position="before">
            <td class="text-center td-subtotal">
                <b t-field="line.price_subtotal" style="white-space: nowrap;" t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}" groups="account.group_show_line_subtotals_tax_excluded"/>
                <b t-field="line.price_total" style="white-space: nowrap;" t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}" groups="account.group_show_line_subtotals_tax_included"/>
            </td>
        </xpath>
    </template>

    <template id="suggested_products_list" inherit_id="website_sale.suggested_products_list" name="Alternative Products in my cart">
        <xpath expr="//h5[hasclass('js_cart_lines')]" position="replace">
            <h5 class='js_cart_lines mt64 mb-3' t-if="suggested_products">Suggested Products</h5>
        </xpath>
        <xpath expr="//table[@id='suggested_products']" position="attributes">
            <attribute name="class" remove="table-striped table-sm" separator=" "/>
        </xpath>
        <xpath expr="//table[@id='suggested_products']/tbody" position="before">
            <thead class="thead-light">
                <tr>
                    <th colspan="2">Product</th>
                    <th>Price</th>
                    <th></th>
                </tr>
            </thead>
        </xpath>
        <xpath expr="//table[@id='suggested_products']/tbody/tr/td[hasclass('td-product_name')]" position="replace">
            <td class='td-product_name'>
                <div>
                    <a class="tp-link-dark" t-att-href="product.website_url">
                        <span t-out="combination_info['display_name']" />
                    </a>
                </div>
                <div class="text-muted d-none d-md-block" t-field="product.description_sale" />
            </td>
        </xpath>
        <xpath expr="//table[@id='suggested_products']//a[hasclass('js_add_suggested_products')]" position="replace">
            <a role="button" class="btn btn-link text-primary js_add_suggested_products">
                <i class="dri dri-cart"></i> Add to Cart
            </a>
        </xpath>
    </template>

    <!--
    ============================================================================
    Wishlist page
    ============================================================================
    -->
    <template id="product_wishlist" inherit_id="website_sale_wishlist.product_wishlist" name="Wishlist Page">
        <xpath expr="//section[hasclass('wishlist-section')]" position="replace">
            <section class="container wishlist-section my-4">
                <div class="row align-items-center">
                    <div class="col-12">
                        <h3 class="d-inline-block mr-2">My Wishlist</h3>
                        <span class="tp-wishlist-counter" t-out="len(wishes)"/> items
                        <div class="custom-control custom-checkbox mt-2">
                            <input type="checkbox" class="custom-control-input" id="b2b_wish" value="1"/>
                            <label class="custom-control-label" for="b2b_wish">Add product to my cart but keep it in my wishlist</label>
                        </div>
                    </div>
                </div>
                <div class="row py-4">
                    <div t-foreach="wishes" t-as="wish" class="col-12 col-sm-6 col-md-4 col-lg-3 mb-4 tp-wishlist-item" t-att-data-wish-id="wish.id" t-att-data-product-id="wish.product_id.id">
                        <div class="card h-100">
                            <a class="card-img-top text-center" t-att-href="wish.product_id.website_url">
                                <img t-attf-src="/web/image/product.product/#{wish.product_id.id}/image_1920/350x350" class="img img-fluid" t-att-alt="wish.product_id.display_name"/>
                            </a>
                            <a href="#" class="tp_wish_rm" data-toggle="tooltip" title="Remove from wishlist">
                                <i class="fa fa-times"/>
                            </a>
                            <t t-call="theme_prime.product_label">
                                <t t-set="label" t-value="wish.product_id.dr_label_id"/>
                            </t>
                            <div class="card-body p-2">
                                <div class="card-text">
                                    <h6 class="text-truncate mb-1">
                                        <a t-att-href="wish.product_id.website_url" class="tp-link-dark" t-att-title="wish.product_id.display_name" t-out="wish.product_id.display_name"/>
                                    </h6>
                                    <div t-if="request.website._dr_has_b2b_access()">
                                        <t t-set="combination_info" t-value="wish.product_id._get_combination_info_variant()"/>
                                        <h6 class="text-primary d-inline-block mb-0" t-out="combination_info['price']" t-options="{'widget': 'monetary', 'display_currency': website.pricelist_id.currency_id}"/>
                                        <small t-attf-class="oe_default_price ml-1 {{'' if combination_info['has_discounted_price'] else 'd-none'}}" style="text-decoration: line-through; white-space: nowrap;" t-out="combination_info['list_price']" t-options="{'widget': 'monetary', 'display_currency': website.pricelist_id.currency_id}"/>
                                        <t t-call="theme_prime.discount_percentage"/>
                                        <small t-if="wish.product_id.base_unit_price" class="cart_product_base_unit_price d-block text-muted" groups="website_sale.group_show_uom_price">
                                            <t t-call='website_sale.base_unit_price'><t t-set='product' t-value='wish.product_id' /></t>
                                        </small>
                                    </div>
                                    <div t-else=" ">
                                        <t t-call="theme_prime.tp_b2b_price_label"/>
                                    </div>
                                    <div class="btn-group w-100" role="group">
                                        <button type="button" t-if="is_view_active('website_sale_comparison.add_to_compare')" class="btn btn-link o_add_to_compare mt-2 tp-link-dark" t-att-data-product-id='wish.product_id.id'>
                                            <small><i class="dri dri-compare"/> Add to compare</small>
                                        </button>
                                        <button type="button" role="button" class="btn btn-primary tp_wish_add mt-2">
                                            <i class="dri dri-cart"></i> Add to cart
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </xpath>
    </template>

    <!--
    ============================================================================
    Comparison page
    ============================================================================
    -->
    <template id="product_compare" inherit_id="website_sale_comparison.product_compare">
        <xpath expr="//section[hasclass('container')]" position="replace">
            <section class="container oe_website_sale my-4">
                <div class="row align-items-center">
                    <div class="col-12">
                        <h3 class="d-inline-block mr-2 mb-0">Comparison</h3><span><t t-out="len(products)"/> items</span>
                    </div>
                </div>
                <div class="row py-4 tp-product-comparison">
                    <div class="table-responsive">
                        <table class="table table-striped w-auto">
                            <t t-set="categories" t-value="products._prepare_categories_for_display()"/>
                            <thead>
                                <tr>
                                    <td t-if="len(categories)"/>
                                    <td t-foreach="products" t-as="product">
                                        <div class="card border-0">
                                            <a class="card-img-top text-center" t-att-href="product.website_url">
                                                <img t-attf-src="/web/image/product.product/#{product.id}/image_1920/350x350" class="img img-fluid" t-att-alt="product.display_name"/>
                                            </a>
                                            <a t-if="len(products) &gt; 2" href="#" t-att-data-product_product_id="product.id" class="o_comparelist_remove" data-toggle="tooltip" title="Remove from comparison">
                                                <i class="fa fa-times"/>
                                            </a>
                                            <t t-call="theme_prime.product_label">
                                                <t t-set="label" t-value="product.dr_label_id"/>
                                            </t>
                                            <div class="card-body p-2">
                                                <div class="card-text">
                                                    <t t-set="combination_info" t-value="product._get_combination_info_variant()"/>
                                                    <h6 class="text-truncate mb-1">
                                                        <a class="tp-link-dark" t-att-title="combination_info['display_name']" t-att-href="product.website_url">
                                                            <t t-out="combination_info['display_name']"/>
                                                        </a>
                                                    </h6>
                                                    <div t-if="request.website._dr_has_b2b_access()">
                                                        <h6 class="text-primary d-inline-block mb-0" t-out="combination_info['price']" t-options="{'widget': 'monetary', 'display_currency': website.pricelist_id.currency_id}"/>
                                                        <small t-attf-class="oe_default_price ml-1 {{'' if combination_info['has_discounted_price'] else 'd-none'}}" style="text-decoration: line-through; white-space: nowrap;" t-out="combination_info['list_price']" t-options="{'widget': 'monetary', 'display_currency': website.pricelist_id.currency_id}"/>
                                                        <t t-call="theme_prime.discount_percentage"/>
                                                        <small class="d-block text-muted" groups="website_sale.group_show_uom_price" t-if="product.base_unit_price">
                                                            <t t-call='website_sale.base_unit_price'/>
                                                        </small>
                                                    </div>
                                                    <div t-else=" ">
                                                        <t t-call="theme_prime.tp_b2b_price_label"/>
                                                    </div>
                                                    <form class="mt-2" action="/shop/cart/update" method="post">
                                                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                                                        <input name="product_id" t-att-value="product.id" type="hidden" t-att-data-product-tracking-info="json.dumps(request.env['product.template'].get_google_analytics_data(combination_info))"/>
                                                        <a role="button" class="btn btn-primary-soft btn-block a-submit" href="#">
                                                            <i class="dri dri-cart"></i> Add to cart
                                                        </a>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="categories" t-as="category">
                                    <t t-foreach="categories[category]" t-as="attribute">
                                        <tr>
                                            <td class="align-middle"><h6 class="m-0" t-field="attribute.name"/></td>
                                            <td t-foreach="categories[category][attribute]" t-as="product">
                                                <t t-foreach="categories[category][attribute][product]" t-as="ptav">
                                                    <span t-field="ptav.name"/><t t-if="not ptav_last">, </t>
                                                </t>
                                                <t t-if="not categories[category][attribute][product]">
                                                    -
                                                </t>
                                            </td>
                                        </tr>
                                    </t>
                                </t>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </xpath>
    </template>

    <!--
    ============================================================================
    Comparison popup
    ============================================================================
    -->
    <template id="comparison_popup" inherit_id="website_sale_comparison.product_product">
        <xpath expr="//h6" position="replace">
            <h6 t-attf-class="#{'mb-0' if not request.website._dr_has_b2b_access() else ' '}">
                <a t-att-href="product.website_url">
                    <t t-esc="combination_info['display_name']" />
                </a>
                <br/>
                <t t-if="request.website._dr_has_b2b_access()">
                    <del t-attf-class="text-danger mr8 {{'' if combination_info['has_discounted_price'] else 'd-none'}}" style="white-space: nowrap;" t-esc="combination_info['list_price']" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}" />
                    <span t-esc="combination_info['price']" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"></span>
                </t>
            </h6>
            <t t-if="not request.website._dr_has_b2b_access()" t-call="theme_prime.tp_b2b_price_label"/>
        </xpath>
    </template>

    <!--
    ============================================================================
    Portal
    ============================================================================
    -->
    <template id="portal_layout" name="Portal Layout" inherit_id="portal.portal_layout">
        <xpath expr="//t[@t-if='my_details']/div[hasclass('row')]/div[contains(@t-attf-class, 'col-lg-6')]" position="attributes">
            <attribute name="t-attf-class">col-12 col-md col-lg-8</attribute>
        </xpath>
    </template>

    <template id="portal_my_home" name="My Portal" inherit_id="portal.portal_my_home">
        <xpath expr="//div[hasclass('o_portal_docs')]" position="attributes">
            <attribute name="class">o_portal_docs row</attribute>
        </xpath>
    </template>

    <template id="portal_docs_entry" name="My Portal Docs Entry" inherit_id="portal.portal_docs_entry">
        <xpath expr="//a[hasclass('list-group-item')]" position="replace">
            <t t-set="icons" t-value="{'/my/quotes': 'fa fa-check-square-o ', '/my/orders': 'fa fa-shopping-cart', '/my/purchase': 'fa fa-credit-card', '/my/invoices': 'fa fa-file-text-o', '/my/projects': 'fa fa-cubes', '/my/tasks': 'fa fa-list', '/my/timesheets': 'fa fa-clock-o', '/my/leads': 'fa fa-handshake-o', '/my/opportunities': 'fa fa-handshake-o'}"/>
            <div class="col-12 col-lg-6 col-xl-4">
                <a t-att-href="url" t-att-title="title">
                    <div class="media p-3 bg-white my-2 dr-portal-doc-entry">
                        <i t-attf-class="#{icons.get(url, 'fa fa-check')} mr-3 bg-primary icon"/>
                        <div class="media-body">
                            <t t-if="count">
                                <h3 class="mb-0" t-out="count"/>
                            </t>
                            <t t-elif="placeholder_count">
                                <h3 class="mb-0" t-att-data-placeholder_count="placeholder_count">
                                    <i class="fa fa-spin fa-spinner"></i>
                                </h3>
                            </t>
                            <h6 class="mb-0 text-muted" t-out="title"></h6>
                        </div>
                    </div>
                </a>
            </div>
        </xpath>
    </template>

    <!--
    ============================================================================
    Portal Order
    ============================================================================
    -->
    <template id="tp_portal_my_orders" name="Portal Template reorder" inherit_id="sale.portal_my_orders">
        <xpath expr="//thead/tr/th[hasclass('text-center')]" position="after">
            <th t-if="request.website._get_dr_theme_config('json_b2b_shop_config')['dr_allow_reorder']" class="text-center tp-reorder-th"></th>
        </xpath>
        <xpath expr="//t[@t-as='order']/tr/td[hasclass('text-center')]" position="after">
            <td t-if="request.website._get_dr_theme_config('json_b2b_shop_config')['dr_allow_reorder']" class="text-center tp-reorder-btn-td">
                <button class="btn btn-sm btn-primary-soft tp-reorder-btn tp-rounded-border" t-att-data-order-id="order.id"><i class="fa fa-repeat"/> <span class="d-lg-inline-block d-none">Reorder</span></button>
            </td>
        </xpath>
    </template>

</odoo>
